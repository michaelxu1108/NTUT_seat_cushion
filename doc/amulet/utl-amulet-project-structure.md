# UTL Amulet å°ˆæ¡ˆæ¶æ§‹èªªæ˜æ–‡ä»¶

**é©ç”¨å°è±¡**: å®Œå…¨ä¸äº†è§£æ­¤å°ˆæ¡ˆçš„é–‹ç™¼è€…æˆ–ä½¿ç”¨è€…
**æ–‡ä»¶ç‰ˆæœ¬**: v1.0
**æœ€å¾Œæ›´æ–°**: 2025-12-02

---

## ğŸ“– ç›®éŒ„

1. [å°ˆæ¡ˆæ¦‚è¿°](#å°ˆæ¡ˆæ¦‚è¿°)
2. [æŠ€è¡“æ¶æ§‹](#æŠ€è¡“æ¶æ§‹)
3. [è³‡æ–™å¤¾çµæ§‹è©³è§£](#è³‡æ–™å¤¾çµæ§‹è©³è§£)
4. [æ ¸å¿ƒåŠŸèƒ½èªªæ˜](#æ ¸å¿ƒåŠŸèƒ½èªªæ˜)
5. [è³‡æ–™æµå‘åœ–](#è³‡æ–™æµå‘åœ–)
6. [ä¸»è¦æŠ€è¡“æ£§](#ä¸»è¦æŠ€è¡“æ£§)
7. [é–‹ç™¼æŒ‡å—](#é–‹ç™¼æŒ‡å—)

---

## å°ˆæ¡ˆæ¦‚è¿°

### ä»€éº¼æ˜¯ UTL Amuletï¼Ÿ

**UTL Amulet** æ˜¯ä¸€å€‹åŸºæ–¼ Flutter é–‹ç™¼çš„**è·¨å¹³å°ç‰©è¯ç¶²æ‡‰ç”¨ç¨‹å¼**ï¼Œä¸»è¦ç”¨æ–¼ï¼š

1. **è—ç‰™é€£æ¥**ï¼šé€éè—ç‰™ä½åŠŸè€— (BLE) é€£æ¥ç©¿æˆ´å¼æ„Ÿæ¸¬å™¨è¨­å‚™ï¼ˆAmulet è­·èº«ç¬¦ï¼‰
2. **å³æ™‚ç›£æ¸¬**ï¼šå³æ™‚æ¥æ”¶ä¸¦é¡¯ç¤ºæ„Ÿæ¸¬å™¨è³‡æ–™ï¼ˆåŠ é€Ÿåº¦ã€ç£åŠ›è¨ˆã€å§¿æ…‹ã€æº«åº¦ç­‰ï¼‰
3. **è³‡æ–™è¨˜éŒ„**ï¼šå°‡æ„Ÿæ¸¬å™¨è³‡æ–™å„²å­˜è‡³æœ¬åœ°è³‡æ–™åº«ï¼ˆHiveï¼‰
4. **è³‡æ–™è¦–è¦ºåŒ–**ï¼šä»¥æŠ˜ç·šåœ–å’Œå„€è¡¨æ¿çš„å½¢å¼å‘ˆç¾æ„Ÿæ¸¬å™¨æ•¸æ“š
5. **è³‡æ–™åŒ¯å‡º**ï¼šæ”¯æ´å°‡è³‡æ–™åŒ¯å‡ºç‚º CSV å’Œ Excel æª”æ¡ˆ
6. **é ç«¯æ§åˆ¶**ï¼šé€éè—ç‰™ç™¼é€æŒ‡ä»¤æ§åˆ¶ç¡¬é«”è¨­å‚™

### æ‡‰ç”¨å ´æ™¯

- å¥åº·ç›£æ¸¬ï¼šè¿½è¹¤ä½¿ç”¨è€…çš„å§¿æ…‹ã€æ­¥æ•¸ã€æ´»å‹•é‡
- è·Œå€’åµæ¸¬ï¼šåµæ¸¬ç•°å¸¸å§¿æ…‹è®ŠåŒ–ï¼ˆå¦‚è·Œå€’ï¼‰
- é‹å‹•åˆ†æï¼šè¨˜éŒ„é‹å‹•æ™‚çš„å„é …ç”Ÿç†æ•¸æ“š
- ç ”ç©¶ç”¨é€”ï¼šæ”¶é›†é•·æœŸæ„Ÿæ¸¬å™¨è³‡æ–™ä¾›å­¸è¡“ç ”ç©¶

---

## æŠ€è¡“æ¶æ§‹

### æ¶æ§‹æ¨¡å¼ï¼šClean Architecture + DDD

æœ¬å°ˆæ¡ˆæ¡ç”¨ **Clean Architectureï¼ˆæ•´æ½”æ¶æ§‹ï¼‰** æ­é… **Domain-Driven Designï¼ˆé ˜åŸŸé©…å‹•è¨­è¨ˆï¼‰** åŸå‰‡ï¼Œå°‡ç¨‹å¼ç¢¼åˆ†ç‚ºä»¥ä¸‹å±¤æ¬¡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Presentation Layer              â”‚  â† UIã€ç‹€æ…‹ç®¡ç†
â”‚   (Screens, Views, ChangeNotifiers)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Application Layer               â”‚  â† æ‡‰ç”¨é‚è¼¯ã€Use Cases
â”‚        (Adapters, Usecases)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Domain Layer                  â”‚  â† æ ¸å¿ƒæ¥­å‹™é‚è¼¯
â”‚      (Entities, Repositories)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Infrastructure Layer              â”‚  â† å¤–éƒ¨ç³»çµ±æ•´åˆ
â”‚  (Bluetooth, Hive, CSV, File System)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Service Layer                 â”‚  â† è·¨å±¤æœå‹™
â”‚     (Data Stream, File Handler)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç‚ºä»€éº¼ä½¿ç”¨ Clean Architectureï¼Ÿ

âœ… **å¯æ¸¬è©¦æ€§**ï¼šå„å±¤ç¨ç«‹ï¼Œæ˜“æ–¼å–®å…ƒæ¸¬è©¦
âœ… **å¯ç¶­è­·æ€§**ï¼šè·è²¬åˆ†é›¢ï¼Œç¨‹å¼ç¢¼æ¸…æ™°
âœ… **å¯æ“´å……æ€§**ï¼šæ–°å¢åŠŸèƒ½ä¸å½±éŸ¿ç¾æœ‰æ¶æ§‹
âœ… **å¯æ›¿æ›æ€§**ï¼šåº•å±¤å¯¦ä½œï¼ˆå¦‚è³‡æ–™åº«ï¼‰å¯éš¨æ™‚æ›¿æ›

---

## è³‡æ–™å¤¾çµæ§‹è©³è§£

### å®Œæ•´ç›®éŒ„æ¨¹ç‹€åœ–

```
apps/utl_amulet/
â”œâ”€â”€ android/                    # Android å¹³å°åŸç”Ÿç¨‹å¼ç¢¼
â”œâ”€â”€ ios/                        # iOS å¹³å°åŸç”Ÿç¨‹å¼ç¢¼
â”œâ”€â”€ lib/                        # Flutter ä¸»ç¨‹å¼ç¢¼ï¼ˆâ˜… æ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ adapter/                # é©é…å±¤ï¼šé€£æ¥ä¸åŒå±¤ç´šçš„æ©‹æ¨‘
â”‚   â”‚   â””â”€â”€ usecase/
â”‚   â”‚       â””â”€â”€ save_amulet_sensor_data_to_repository_usecase.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ application/            # æ‡‰ç”¨å±¤ï¼šæ¥­å‹™æµç¨‹ç·¨æ’
â”‚   â”‚   â””â”€â”€ amulet_entity_creator.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ domain/                 # é ˜åŸŸå±¤ï¼šæ ¸å¿ƒæ¥­å‹™é‚è¼¯ï¼ˆâ˜… æœ€é‡è¦ï¼‰
â”‚   â”‚   â”œâ”€â”€ entity/             # å¯¦é«”ï¼šè³‡æ–™æ¨¡å‹å®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ amulet_entity.dart          # Amulet æ„Ÿæ¸¬å™¨è³‡æ–™å¯¦é«”
â”‚   â”‚   â”œâ”€â”€ repository/         # å„²å­˜åº«ä»‹é¢ï¼šå®šç¾©è³‡æ–™å­˜å–å¥‘ç´„
â”‚   â”‚   â”‚   â””â”€â”€ amulet_repository.dart
â”‚   â”‚   â””â”€â”€ usecase/            # ä½¿ç”¨æ¡ˆä¾‹ï¼šå…·é«”æ¥­å‹™é‚è¼¯
â”‚   â”‚       â””â”€â”€ amulet_fetch_entities_process.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/         # åŸºç¤è¨­æ–½å±¤ï¼šå¤–éƒ¨ç³»çµ±æ•´åˆ
â”‚   â”‚   â”œâ”€â”€ repository/         # å„²å­˜åº«å¯¦ä½œ
â”‚   â”‚   â”‚   â””â”€â”€ amulet_repository.dart
â”‚   â”‚   â”œâ”€â”€ source/             # è³‡æ–™ä¾†æº
â”‚   â”‚   â”‚   â”œâ”€â”€ bluetooth/      # è—ç‰™é€šè¨Š
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ bluetooth_module.dart           # è—ç‰™æ¨¡çµ„æ ¸å¿ƒ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ bluetooth_received_packet.dart  # å°åŒ…è§£æ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ bluetooth_sent_packet.dart      # å°åŒ…ç™¼é€
â”‚   â”‚   â”‚   â”œâ”€â”€ csv_file/       # CSV æª”æ¡ˆåŒ¯å‡º
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ amulet_csv_file.dart
â”‚   â”‚   â”‚   â””â”€â”€ hive/           # Hive æœ¬åœ°è³‡æ–™åº«
â”‚   â”‚   â”‚       â”œâ”€â”€ hive_amulet.dart                # Schema å®šç¾©
â”‚   â”‚   â”‚       â”œâ”€â”€ hive_amulet.g.dart              # è‡ªå‹•ç”Ÿæˆé©é…å™¨
â”‚   â”‚   â”‚       â”œâ”€â”€ hive_mapper.dart                # è³‡æ–™è½‰æ›å™¨
â”‚   â”‚   â”‚       â””â”€â”€ hive_source_handler.dart        # è³‡æ–™åº«æ“ä½œ
â”‚   â”‚   â””â”€â”€ service/            # æœå‹™å¯¦ä½œ
â”‚   â”‚       â”œâ”€â”€ data_stream/
â”‚   â”‚       â”‚   â””â”€â”€ amulet_sensor_data_stream.dart
â”‚   â”‚       â””â”€â”€ file/
â”‚   â”‚           â””â”€â”€ file_handler.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ service/                # æœå‹™å±¤ï¼šè·¨å±¤å…±ç”¨æœå‹™ä»‹é¢
â”‚   â”‚   â”œâ”€â”€ data_stream/
â”‚   â”‚   â”‚   â””â”€â”€ amulet_sensor_data_stream.dart
â”‚   â”‚   â””â”€â”€ file/
â”‚   â”‚       â””â”€â”€ file_handler.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ presentation/           # å±•ç¤ºå±¤ï¼šUI èˆ‡ä½¿ç”¨è€…äº’å‹•
â”‚   â”‚   â”œâ”€â”€ change_notifier/    # ç‹€æ…‹ç®¡ç†ï¼ˆProvider æ¨¡å¼ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ amulet/
â”‚   â”‚   â”‚       â”œâ”€â”€ amulet_features_change_notifier.dart      # åŠŸèƒ½ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ amulet_line_chart_change_notifier.dart    # åœ–è¡¨ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ amulet_line_chart_filtered_change_notifier.dart
â”‚   â”‚   â”‚       â””â”€â”€ mapper/     # UI è³‡æ–™è½‰æ›å™¨
â”‚   â”‚   â”‚           â”œâ”€â”€ color.dart
â”‚   â”‚   â”‚           â”œâ”€â”€ data_list.dart
â”‚   â”‚   â”‚           â”œâ”€â”€ item.dart
â”‚   â”‚   â”‚           â”œâ”€â”€ line_series_list.dart
â”‚   â”‚   â”‚           â”œâ”€â”€ mapper.dart
â”‚   â”‚   â”‚           â””â”€â”€ name.dart
â”‚   â”‚   â”œâ”€â”€ screen/             # ç•«é¢ï¼ˆå®Œæ•´é é¢ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ home_screen.dart                              # ä¸»ç•«é¢
â”‚   â”‚   â”œâ”€â”€ theme/              # ä¸»é¡Œè¨­å®š
â”‚   â”‚   â”‚   â””â”€â”€ theme_data.dart
â”‚   â”‚   â””â”€â”€ view/               # è¦–åœ–å…ƒä»¶ï¼ˆå¯é‡ç”¨çµ„ä»¶ï¼‰
â”‚   â”‚       â”œâ”€â”€ amulet/
â”‚   â”‚       â”‚   â”œâ”€â”€ amulet_buttons_board.dart                 # æ§åˆ¶æŒ‰éˆ•é¢æ¿
â”‚   â”‚       â”‚   â”œâ”€â”€ amulet_dashboard.dart                     # å„€è¡¨æ¿
â”‚   â”‚       â”‚   â”œâ”€â”€ amulet_line_chart.dart                    # å–®ä¸€æŠ˜ç·šåœ–
â”‚   â”‚       â”‚   â””â”€â”€ amulet_line_chart_list.dart               # æŠ˜ç·šåœ–åˆ—è¡¨
â”‚   â”‚       â””â”€â”€ bluetooth/
â”‚   â”‚           â””â”€â”€ bluetooth_scanner_view.dart               # è—ç‰™æƒæä»‹é¢
â”‚   â”‚
â”‚   â”œâ”€â”€ init/                   # åˆå§‹åŒ–ç›¸é—œ
â”‚   â”‚   â”œâ”€â”€ initializer.dart                                  # æ‡‰ç”¨åˆå§‹åŒ–å™¨
â”‚   â”‚   â”œâ”€â”€ application_persist.dart                          # æ‡‰ç”¨ç‹€æ…‹æŒä¹…åŒ–
â”‚   â”‚   â””â”€â”€ resource/           # è³‡æºåˆå§‹åŒ–
â”‚   â”‚       â”œâ”€â”€ data/
â”‚   â”‚       â”‚   â””â”€â”€ data_resource.dart
â”‚   â”‚       â”œâ”€â”€ infrastructure/
â”‚   â”‚       â”‚   â”œâ”€â”€ bluetooth_resource.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ hive_source.dart
â”‚   â”‚       â”‚   â””â”€â”€ path_resource.dart
â”‚   â”‚       â””â”€â”€ service/
â”‚   â”‚           â””â”€â”€ service_resource.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ l10n/                   # åœ‹éš›åŒ–èˆ‡æœ¬åœ°åŒ–
â”‚   â”‚   â””â”€â”€ gen_l10n/           # è‡ªå‹•ç”Ÿæˆçš„å¤šèªç³»æª”æ¡ˆ
â”‚   â”‚       â”œâ”€â”€ app_localizations.dart
â”‚   â”‚       â”œâ”€â”€ app_localizations_en.dart
â”‚   â”‚       â””â”€â”€ app_localizations_zh.dart
â”‚   â”‚
â”‚   â””â”€â”€ main.dart               # æ‡‰ç”¨ç¨‹å¼å…¥å£ï¼ˆâ˜… å•Ÿå‹•é»ï¼‰
â”‚
â”œâ”€â”€ l10n/                       # å¤šèªç³»åŸå§‹æª”æ¡ˆ
â”‚   â”œâ”€â”€ app_en.arb              # è‹±æ–‡ç¿»è­¯
â”‚   â”œâ”€â”€ app_zh.arb              # ç°¡é«”ä¸­æ–‡ç¿»è­¯
â”‚   â””â”€â”€ app_zh_tw.arb           # ç¹é«”ä¸­æ–‡ç¿»è­¯
â”‚
â”œâ”€â”€ test/                       # å–®å…ƒæ¸¬è©¦èˆ‡æ•´åˆæ¸¬è©¦
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ fake_data_generator.dart
â”‚   â””â”€â”€ fake_bluetooth_packets_main_test.dart
â”‚
â”œâ”€â”€ pubspec.yaml                # Flutter å°ˆæ¡ˆé…ç½®æª”ï¼ˆä¾è³´ç®¡ç†ï¼‰
â”œâ”€â”€ l10n.yaml                   # å¤šèªç³»é…ç½®
â”œâ”€â”€ analysis_options.yaml       # Dart ç¨‹å¼ç¢¼åˆ†æè¦å‰‡
â””â”€â”€ README.md                   # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
```

---

## æ ¸å¿ƒåŠŸèƒ½èªªæ˜

### 1. è—ç‰™é€£æ¥èˆ‡é€šè¨Š

**æª”æ¡ˆä½ç½®**: `lib/infrastructure/source/bluetooth/`

#### åŠŸèƒ½æè¿°

- **æƒæè¨­å‚™**ï¼šæœå°‹é™„è¿‘çš„ Amulet è—ç‰™è¨­å‚™
- **å»ºç«‹é€£æ¥**ï¼šèˆ‡é¸å®šçš„è¨­å‚™é…å°ä¸¦é€£æ¥
- **è³‡æ–™æ¥æ”¶**ï¼šé€é Nordic UART Service (NUS) æ¥æ”¶æ„Ÿæ¸¬å™¨è³‡æ–™
- **æŒ‡ä»¤ç™¼é€**ï¼šç™¼é€æ§åˆ¶æŒ‡ä»¤è‡³ç¡¬é«”ï¼ˆå¦‚æ ¡æº–ã€æ¨¡å¼åˆ‡æ›ï¼‰

#### é—œéµæª”æ¡ˆ

| æª”æ¡ˆåç¨±                         | åŠŸèƒ½èªªæ˜                               |
| -------------------------------- | -------------------------------------- |
| `bluetooth_module.dart`          | è—ç‰™æ ¸å¿ƒæ¨¡çµ„ï¼Œç®¡ç†é€£æ¥ç”Ÿå‘½é€±æœŸ         |
| `bluetooth_received_packet.dart` | è§£ææ¥æ”¶åˆ°çš„è—ç‰™å°åŒ…ï¼Œè½‰æ›ç‚ºçµæ§‹åŒ–è³‡æ–™ |
| `bluetooth_sent_packet.dart`     | å°è£ç™¼é€çš„è—ç‰™æŒ‡ä»¤                     |

#### å°åŒ…æ ¼å¼ï¼ˆv2.0ï¼‰

æ¥æ”¶åˆ°çš„è—ç‰™å°åŒ…ç‚º **42 bytes** çš„äºŒé€²ä½è³‡æ–™ï¼ŒåŒ…å«ï¼š

- **[0-21]**: åŠ é€Ÿåº¦ã€ç£åŠ›è¨ˆã€å§¿æ…‹è§’ç­‰ 16-bit æ•¸å€¼ï¼ˆBig-Endianï¼‰
- **[22-25]**: æº«åº¦è³‡æ–™
- **[26]**: å§¿æ…‹é¡å‹ï¼ˆ0-11ï¼‰
- **[27-28]**: Beacon RSSIï¼ˆè¨Šè™Ÿå¼·åº¦ï¼‰
- **[29-36]**: æ–¹å‘ã€ADCã€é›»æ± ã€æ­¥æ•¸ã€è¨ˆåˆ†ç­‰è³‡æ–™
- **[38-41]**: æ°£å£“ï¼ˆFloat32, Little-Endianï¼‰

> è©³ç´°å°åŒ…æ ¼å¼è«‹åƒè€ƒï¼š[è—ç‰™å°åŒ…å”è­°æ›´æ–°æ–‡ä»¶](update/2025-12-02-bluetooth-packet-protocol-update.md)

---

### 2. è³‡æ–™å„²å­˜ï¼ˆHive æœ¬åœ°è³‡æ–™åº«ï¼‰

**æª”æ¡ˆä½ç½®**: `lib/infrastructure/source/hive/`

#### åŠŸèƒ½æè¿°

ä½¿ç”¨ **Hive**ï¼ˆé«˜æ•ˆèƒ½ NoSQL è³‡æ–™åº«ï¼‰å„²å­˜æ„Ÿæ¸¬å™¨æ­·å²è³‡æ–™ï¼Œæ”¯æ´ï¼š

- âœ… é›¢ç·šå­˜å–ï¼ˆä¸éœ€ç¶²è·¯ï¼‰
- âœ… å¿«é€Ÿè®€å¯«ï¼ˆæ¯«ç§’ç´šï¼‰
- âœ… å‹åˆ¥å®‰å…¨ï¼ˆTypeAdapterï¼‰
- âœ… è¼•é‡ç´šï¼ˆç„¡éœ€ SQL èªæ³•ï¼‰

#### è³‡æ–™æ¨¡å‹

```dart
@HiveType(typeId: 1)
class HiveAmuletEntity {
  @HiveField(0) final String deviceId;      // è¨­å‚™ ID
  @HiveField(1) final DateTime time;        // æ™‚é–“æˆ³
  @HiveField(2) final int accX;             // åŠ é€Ÿåº¦ X
  @HiveField(3) final int accY;             // åŠ é€Ÿåº¦ Y
  @HiveField(4) final int accZ;             // åŠ é€Ÿåº¦ Z
  // ... å…± 23 å€‹æ¬„ä½
}
```

#### é—œéµæª”æ¡ˆ

| æª”æ¡ˆåç¨±                   | åŠŸèƒ½èªªæ˜                                      |
| -------------------------- | --------------------------------------------- |
| `hive_amulet.dart`         | Hive Schema å®šç¾©ï¼ˆä½¿ç”¨ `@HiveType` è¨»è§£ï¼‰     |
| `hive_amulet.g.dart`       | è‡ªå‹•ç”Ÿæˆçš„ TypeAdapterï¼ˆåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼‰     |
| `hive_mapper.dart`         | Domain Entity â†” Hive Entity è½‰æ›å™¨            |
| `hive_source_handler.dart` | CRUD æ“ä½œå°è£ï¼ˆCreate, Read, Update, Deleteï¼‰ |

---

### 3. è³‡æ–™è¦–è¦ºåŒ–ï¼ˆåœ–è¡¨ï¼‰

**æª”æ¡ˆä½ç½®**: `lib/presentation/view/amulet/`

#### åŠŸèƒ½æè¿°

ä½¿ç”¨ **Syncfusion Charts** ç¹ªè£½å³æ™‚å‹•æ…‹æŠ˜ç·šåœ–ï¼š

- ğŸ“Š åŒæ™‚é¡¯ç¤ºå¤šæ¢æ„Ÿæ¸¬å™¨è³‡æ–™æ›²ç·šï¼ˆåŠ é€Ÿåº¦ã€ç£åŠ›è¨ˆã€å§¿æ…‹è§’ç­‰ï¼‰
- ğŸ”„ å³æ™‚æ›´æ–°ï¼ˆéš¨è‘—è—ç‰™è³‡æ–™æµå‹•æ…‹åˆ·æ–°ï¼‰
- ğŸ¨ è‡ªå‹•é…è‰²ï¼ˆæ¯ç¨®è³‡æ–™é¡å‹æœ‰å°æ‡‰é¡è‰²ï¼‰
- ğŸ” æ”¯æ´ç¸®æ”¾èˆ‡å¹³ç§»

#### åœ–è¡¨é¡å‹

1. **å³æ™‚æŠ˜ç·šåœ–**ï¼šé¡¯ç¤ºæœ€è¿‘ N ç§’çš„è³‡æ–™
2. **æ­·å²è³‡æ–™åœ–**ï¼šå¾è³‡æ–™åº«è®€å–ä¸¦ç¹ªè£½

#### é—œéµæª”æ¡ˆ

| æª”æ¡ˆåç¨±                                 | åŠŸèƒ½èªªæ˜                   |
| ---------------------------------------- | -------------------------- |
| `amulet_line_chart.dart`                 | å–®ä¸€æŠ˜ç·šåœ–å…ƒä»¶             |
| `amulet_line_chart_list.dart`            | æŠ˜ç·šåœ–åˆ—è¡¨ï¼ˆé¡¯ç¤ºå¤šå€‹åœ–è¡¨ï¼‰ |
| `amulet_line_chart_change_notifier.dart` | åœ–è¡¨ç‹€æ…‹ç®¡ç†å™¨             |

---

### 4. è³‡æ–™åŒ¯å‡ºï¼ˆCSV / Excelï¼‰

**æª”æ¡ˆä½ç½®**: `lib/infrastructure/source/csv_file/` èˆ‡ `lib/service/file/`

#### åŠŸèƒ½æè¿°

- **CSV åŒ¯å‡º**ï¼šå°‡è³‡æ–™åº«ä¸­çš„è³‡æ–™åŒ¯å‡ºç‚º `.csv` æª”æ¡ˆ
- **Excel åŒ¯å‡º**ï¼šä½¿ç”¨ `syncfusion_flutter_xlsio` ç”Ÿæˆ `.xlsx` æª”æ¡ˆ
- **è‡ªå‹•å‘½å**ï¼šæª”æ¡ˆåç¨±åŒ…å«æ™‚é–“æˆ³ï¼ˆå¦‚ `Amulet_2025-12-02_14-30-00.csv`ï¼‰
- **UTF-8 BOM**ï¼šç¢ºä¿ Excel æ­£ç¢ºè­˜åˆ¥ä¸­æ–‡å­—ç¬¦

#### åŒ¯å‡ºæµç¨‹

```
ä½¿ç”¨è€…é»æ“Šã€ŒåŒ¯å‡ºã€æŒ‰éˆ•
    â†“
å¾ Hive è®€å–æ‰€æœ‰è³‡æ–™
    â†“
è½‰æ›ç‚º CSV/Excel æ ¼å¼
    â†“
å¯«å…¥æª”æ¡ˆç³»çµ±ï¼ˆDocuments ç›®éŒ„ï¼‰
    â†“
é¡¯ç¤ºæˆåŠŸè¨Šæ¯èˆ‡æª”æ¡ˆè·¯å¾‘
```

#### é—œéµæª”æ¡ˆ

| æª”æ¡ˆåç¨±               | åŠŸèƒ½èªªæ˜                           |
| ---------------------- | ---------------------------------- |
| `amulet_csv_file.dart` | CSV æª”æ¡ˆç”Ÿæˆèˆ‡å¯«å…¥                 |
| `file_handler.dart`    | æª”æ¡ˆç³»çµ±æ“ä½œï¼ˆè·¯å¾‘ç®¡ç†ã€æª”æ¡ˆå¯«å…¥ï¼‰ |

---

### 5. å¤šèªç³»æ”¯æ´ï¼ˆi18nï¼‰

**æª”æ¡ˆä½ç½®**: `l10n/` èˆ‡ `lib/l10n/gen_l10n/`

#### æ”¯æ´èªè¨€

- ğŸ‡ºğŸ‡¸ **è‹±æ–‡ (en)**
- ğŸ‡¨ğŸ‡³ **ç°¡é«”ä¸­æ–‡ (zh)**
- ğŸ‡¹ğŸ‡¼ **ç¹é«”ä¸­æ–‡ (zh_TW)**

#### é‹ä½œåŸç†

1. é–‹ç™¼è€…ç·¨è¼¯ `l10n/app_*.arb` æª”æ¡ˆï¼ˆJSON æ ¼å¼ï¼‰
2. Flutter è‡ªå‹•ç”Ÿæˆ `app_localizations_*.dart` é¡åˆ¥
3. UI ä¸­ä½¿ç”¨ `AppLocalizations.of(context)!.keyName` å–å¾—ç¿»è­¯æ–‡å­—
4. ç³»çµ±æ ¹æ“šè£ç½®èªè¨€è‡ªå‹•åˆ‡æ›

#### ç¯„ä¾‹

```json
// l10n/app_zh_tw.arb
{
  "appName": "UTL è­·èº«ç¬¦",
  "connect": "é€£æ¥",
  "disconnect": "ä¸­æ–·é€£æ¥",
  "exportData": "åŒ¯å‡ºè³‡æ–™"
}
```

```dart
// Dart ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨
Text(AppLocalizations.of(context)!.connect)  // é¡¯ç¤ºã€Œé€£æ¥ã€
```

---

## è³‡æ–™æµå‘åœ–

### æ„Ÿæ¸¬å™¨è³‡æ–™æ¥æ”¶æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¡¬é«”è¨­å‚™       â”‚
â”‚  (Amulet)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ è—ç‰™å°åŒ…ï¼ˆ42 bytesï¼‰
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BluetoothModule               â”‚  â† Infrastructure Layer
â”‚  æ¥æ”¶è—ç‰™å°åŒ…                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BluetoothReceivedPacket       â”‚  â† Infrastructure Layer
â”‚  è§£æå°åŒ… â†’ AmuletSensorData    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AmuletSensorDataStream        â”‚  â† Service Layer
â”‚  è³‡æ–™æµå»£æ’­ï¼ˆStreamï¼‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                         â”‚
         â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI å³æ™‚é¡¯ç¤º     â”‚     â”‚  å„²å­˜è‡³è³‡æ–™åº«     â”‚
â”‚  (æŠ˜ç·šåœ–æ›´æ–°)    â”‚     â”‚  (Hive)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è³‡æ–™åŒ¯å‡ºæµç¨‹

```
ä½¿ç”¨è€…é»æ“Šã€ŒåŒ¯å‡ºã€æŒ‰éˆ•
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FileHandler                   â”‚  â† Service Layer
â”‚  è§¸ç™¼åŒ¯å‡ºæµç¨‹                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AmuletRepository              â”‚  â† Domain Layer
â”‚  æŸ¥è©¢æ‰€æœ‰æ­·å²è³‡æ–™               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HiveSourceHandler             â”‚  â† Infrastructure Layer
â”‚  å¾ Hive è®€å– HiveAmuletEntity  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HiveMapper                    â”‚  â† Infrastructure Layer
â”‚  è½‰æ›ç‚º AmuletEntity            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AmuletCsvFile                 â”‚  â† Infrastructure Layer
â”‚  å¯«å…¥ CSV æª”æ¡ˆ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
    å„²å­˜è‡³æª”æ¡ˆç³»çµ±
    (Documents/Amulet_*.csv)
```

---

## ä¸»è¦æŠ€è¡“æ£§

### Flutter æ¡†æ¶èˆ‡å¥—ä»¶

| æŠ€è¡“            | ç”¨é€”           | ç‰ˆæœ¬   |
| --------------- | -------------- | ------ |
| **Flutter SDK** | è·¨å¹³å° UI æ¡†æ¶ | ^3.9.2 |
| **Dart**        | ç¨‹å¼èªè¨€       | ^3.9.2 |

### æ ¸å¿ƒåŠŸèƒ½å¥—ä»¶

| å¥—ä»¶åç¨±                    | ç”¨é€”                             | å®˜æ–¹æ–‡ä»¶                                                                |
| --------------------------- | -------------------------------- | ----------------------------------------------------------------------- |
| `flutter_blue_plus`         | è—ç‰™ä½åŠŸè€—ï¼ˆBLEï¼‰é€šè¨Š            | [Pub.dev](https://pub.dev/packages/flutter_blue_plus)                   |
| `hive` / `hive_flutter`     | æœ¬åœ° NoSQL è³‡æ–™åº«                | [Hive Docs](https://docs.hivedb.dev/)                                   |
| `provider`                  | ç‹€æ…‹ç®¡ç†ï¼ˆDependency Injectionï¼‰ | [Provider](https://pub.dev/packages/provider)                           |
| `syncfusion_flutter_charts` | åœ–è¡¨ç¹ªè£½                         | [Syncfusion](https://www.syncfusion.com/flutter-widgets/flutter-charts) |
| `syncfusion_flutter_xlsio`  | Excel æª”æ¡ˆç”Ÿæˆ                   | [XlsIO](https://www.syncfusion.com/flutter-widgets/flutter-xlsio)       |

### å·¥å…·å¥—ä»¶

| å¥—ä»¶åç¨±                  | ç”¨é€”                                |
| ------------------------- | ----------------------------------- |
| `path_provider`           | å–å¾—ç³»çµ±è·¯å¾‘ï¼ˆDocuments, Cache ç­‰ï¼‰ |
| `permission_handler`      | è«‹æ±‚ç³»çµ±æ¬Šé™ï¼ˆè—ç‰™ã€å„²å­˜ç­‰ï¼‰        |
| `shared_preferences`      | è¼•é‡ç´šéµå€¼å°å„²å­˜                    |
| `fluttertoast`            | Toast è¨Šæ¯æç¤º                      |
| `awesome_dialog`          | ç²¾ç¾å°è©±æ¡†                          |
| `flutter_ringtone_player` | æ’­æ”¾ç³»çµ±éˆ´è²ï¼ˆè­¦ç¤ºéŸ³ï¼‰              |
| `equatable`               | ç°¡åŒ–ç‰©ä»¶ç›¸ç­‰æ€§æ¯”è¼ƒ                  |
| `synchronized`            | éåŒæ­¥é–ï¼ˆé˜²æ­¢ç«¶æ…‹æ¢ä»¶ï¼‰            |

### Monorepo å…§éƒ¨å¥—ä»¶

æœ¬å°ˆæ¡ˆä½æ–¼ Monorepo ä¸­ï¼Œä¾è³´ä»¥ä¸‹å…§éƒ¨å¥—ä»¶ï¼š

| å¥—ä»¶åç¨±                 | åŠŸèƒ½             |
| ------------------------ | ---------------- |
| `bluetooth_presentation` | è—ç‰™ UI å…±ç”¨å…ƒä»¶ |
| `bluetooth_utils`        | è—ç‰™å·¥å…·å‡½å¼     |
| `common_utils`           | é€šç”¨å·¥å…·å‡½å¼     |
| `file_utils`             | æª”æ¡ˆè™•ç†å·¥å…·     |
| `line_chart_utils`       | æŠ˜ç·šåœ–å·¥å…·       |
| `path_provider_utils`    | è·¯å¾‘æä¾›å·¥å…·     |

---

## é–‹ç™¼æŒ‡å—

### ç’°å¢ƒéœ€æ±‚

- **Flutter SDK**: 3.9.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Dart SDK**: 3.9.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Android Studio** / **Xcode**ï¼ˆè¦–ç›®æ¨™å¹³å°è€Œå®šï¼‰
- **Git**ï¼ˆç”¨æ–¼ç‰ˆæœ¬æ§åˆ¶ï¼‰

### å¿«é€Ÿé–‹å§‹

#### 1. å®‰è£ä¾è³´

```bash
cd apps/utl_amulet
flutter pub get
```

#### 2. ç”Ÿæˆå¤šèªç³»æª”æ¡ˆ

```bash
flutter gen-l10n
```

#### 3. åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼

```bash
# Android
flutter run -d android

# iOS
flutter run -d ios

# æŒ‡å®šè¨­å‚™
flutter run -d <device_id>
```

#### 4. åŸ·è¡Œæ¸¬è©¦

```bash
flutter test
```

---

### æ–°å¢åŠŸèƒ½æŒ‡å—

#### æƒ…å¢ƒ 1: æ–°å¢ä¸€å€‹æ„Ÿæ¸¬å™¨æ¬„ä½ï¼ˆå¦‚ã€Œæ¿•åº¦ã€ï¼‰

**æ­¥é©Ÿ**:

1. **ä¿®æ”¹ Domain Entity** (`lib/domain/entity/amulet_entity.dart`)

   ```dart
   class AmuletEntity {
     final int humidity;  // æ–°å¢æ¬„ä½
     // ...
   }
   ```

2. **ä¿®æ”¹ Hive Schema** (`lib/infrastructure/source/hive/hive_amulet.dart`)

   ```dart
   @HiveField(23)
   final int humidity;
   ```

3. **é‡æ–°ç”Ÿæˆ Hive Adapter**

   ```bash
   flutter packages pub run build_runner build
   ```

   æˆ–æ‰‹å‹•æ›´æ–° `hive_amulet.g.dart`

4. **ä¿®æ”¹è—ç‰™å°åŒ…è§£æ** (`lib/infrastructure/source/bluetooth/bluetooth_received_packet.dart`)

   ```dart
   humidity: bytes.getUint8(42),  // å‡è¨­åœ¨ byte 42
   ```

5. **æ›´æ–° CSV åŒ¯å‡º** (`lib/infrastructure/source/csv_file/amulet_csv_file.dart`)

   - æ–°å¢æ¨™é¡Œåˆ—
   - æ–°å¢è³‡æ–™åˆ—

6. **æ›´æ–°å¤šèªç³»** (`l10n/app_*.arb`)

   ```json
   "humidity": "æ¿•åº¦"
   ```

7. **æ›´æ–° UI**ï¼ˆè¦–éœ€æ±‚æ–°å¢åœ–è¡¨æˆ–é¡¯ç¤ºæ¬„ä½ï¼‰

#### æƒ…å¢ƒ 2: æ–°å¢ä¸€å€‹è—ç‰™æ§åˆ¶æŒ‡ä»¤ï¼ˆå¦‚ã€Œé‡å•Ÿè¨­å‚™ã€ï¼‰

**æ­¥é©Ÿ**:

1. **å®šç¾©æŒ‡ä»¤å¸¸æ•¸** (`lib/infrastructure/source/bluetooth/bluetooth_sent_packet.dart`)

   ```dart
   static const int COMMAND_REBOOT = 0x66;
   ```

2. **æ–°å¢ UI æŒ‰éˆ•** (`lib/presentation/view/amulet/amulet_buttons_board.dart`)

   ```dart
   ElevatedButton(
     onPressed: () async {
       await BluetoothResource.bluetoothModule.sendCommand(
         command: "0x66"
       );
     },
     child: Text("é‡å•Ÿè¨­å‚™"),
   )
   ```

3. **æ›´æ–°å¤šèªç³»**

   ```json
   "rebootDevice": "é‡å•Ÿè¨­å‚™"
   ```

---

### å°ˆæ¡ˆè¦ç¯„

#### å‘½åæ…£ä¾‹

- **é¡åˆ¥åç¨±**: PascalCaseï¼ˆå¦‚ `AmuletEntity`ï¼‰
- **æª”æ¡ˆåç¨±**: snake_caseï¼ˆå¦‚ `amulet_entity.dart`ï¼‰
- **è®Šæ•¸/å‡½å¼**: camelCaseï¼ˆå¦‚ `deviceId`, `getData()`ï¼‰
- **å¸¸æ•¸**: UPPER_SNAKE_CASEï¼ˆå¦‚ `MAX_BUFFER_SIZE`ï¼‰

#### è³‡æ–™å¤¾çµ„ç¹”åŸå‰‡

- **æŒ‰å±¤ç´šåˆ†é¡**ï¼šdomain / infrastructure / presentation
- **æŒ‰åŠŸèƒ½åˆ†çµ„**ï¼šbluetooth / hive / csv_file
- **ä¸€å€‹æª”æ¡ˆä¸€å€‹é¡åˆ¥**ï¼šé¿å…å·¨å¤§æª”æ¡ˆ

#### Git Commit è¨Šæ¯æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type é¡å‹**:

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¾© Bug
- `docs`: æ–‡ä»¶æ›´æ–°
- `refactor`: é‡æ§‹ç¨‹å¼ç¢¼
- `test`: æ¸¬è©¦ç›¸é—œ
- `chore`: é›œé …ï¼ˆå¦‚æ›´æ–°ä¾è³´ï¼‰

**ç¯„ä¾‹**:

```
feat(bluetooth): æ–°å¢æ¿•åº¦æ„Ÿæ¸¬å™¨è³‡æ–™è§£æ

- æ›´æ–°å°åŒ…è§£æé‚è¼¯
- æ–°å¢ humidity æ¬„ä½è‡³ AmuletEntity
- æ›´æ–° Hive schema

Closes #123
```

---

### å¸¸è¦‹å•é¡Œæ’è§£

#### Q1: Hive è®€å–å¤±æ•—ï¼Œæç¤ºå‹åˆ¥éŒ¯èª¤

**åŸå› **: Schema ç‰ˆæœ¬ä¸ä¸€è‡´ï¼ˆèˆŠè³‡æ–™ vs æ–° Schemaï¼‰

**è§£æ±ºæ–¹æ¡ˆ**:

```dart
// æ¸…é™¤ Hive è³‡æ–™åº«
await Hive.deleteBoxFromDisk('amulet');
```

#### Q2: è—ç‰™é€£æ¥å¾Œç„¡è³‡æ–™

**æª¢æŸ¥æ¸…å–®**:

1. ç¢ºèªè¨­å‚™å·²æ­£ç¢ºé…å°
2. æª¢æŸ¥ NUS UUID æ˜¯å¦æ­£ç¢º
3. æŸ¥çœ‹ `bluetooth_received_packet.dart` å°åŒ…è§£æé‚è¼¯
4. å•Ÿç”¨ Flutter Debug æ¨¡å¼æŸ¥çœ‹ `debugPrint` è¼¸å‡º

#### Q3: å¤šèªç³»æœªç”Ÿæ•ˆ

**è§£æ±ºæ–¹æ¡ˆ**:

```bash
# é‡æ–°ç”Ÿæˆå¤šèªç³»æª”æ¡ˆ
flutter gen-l10n

# é‡æ–°å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
flutter run
```

#### Q4: CSV æª”æ¡ˆäº‚ç¢¼

**åŸå› **: ç¼ºå°‘ UTF-8 BOM

**æª¢æŸ¥**: `amulet_csv_file.dart` çš„ `clear()` æ–¹æ³•æ˜¯å¦è¨­å®š `bom: true`

---

## ç›¸é—œæ–‡ä»¶

- [è—ç‰™å°åŒ…å”è­°æ›´æ–°](update/2025-12-02-bluetooth-packet-protocol-update.md)
- [å°ˆæ¡ˆè¨­å®šèˆ‡ä¿®å¾©è¨˜éŒ„](update/2025-12-01-utl-amulet-project-setup-and-fixes.md)

---

## è¯çµ¡èˆ‡æ”¯æ´

å¦‚æœ‰ä»»ä½•å•é¡Œæˆ–å»ºè­°ï¼Œè«‹è¯çµ¡é–‹ç™¼åœ˜éšŠæˆ–åœ¨å°ˆæ¡ˆ Issue Tracker æå‡ºã€‚

**æœ€å¾Œæ›´æ–°**: 2025-12-02
